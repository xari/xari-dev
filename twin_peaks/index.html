<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:description" content="Data wrangling with the Tidyverse"/><meta data-react-helmet="true" name="twitter:title" content="Scraping web data with R &amp; the Tidyverse"/><meta data-react-helmet="true" name="twitter:creator" content="Harry Anderson"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="Data wrangling with the Tidyverse"/><meta data-react-helmet="true" property="og:title" content="Scraping web data with R &amp; the Tidyverse"/><meta data-react-helmet="true" name="description" content="Data wrangling with the Tidyverse"/><meta name="theme-color" content="#98c6c3"/><meta name="generator" content="Gatsby 4.10.3"/><style data-href="/xari-dev/styles.192d59cafb0658b431ed.css" data-identity="gatsby-global-css">:root{--indigo-100:#e0e7ff;--indigo-500:#6366f1;--indigo-600:#4f46e5;--indigo-700:#4338ca}input[type=range]{-webkit-appearance:none;margin:18px 0;width:100%}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-runnable-track{background:var(--indigo-600);border:.2px solid #010101;border-radius:1.3px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;cursor:pointer;height:8.4px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#fff;border:1px solid #000;border-radius:3px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;cursor:pointer;height:36px;margin-top:-14px;width:16px}input[type=range]:focus::-webkit-slider-runnable-track{background:var(--indigo-500)}input[type=range]::-moz-range-track{background:var(--indigo-600);border:.2px solid #010101;border-radius:1.3px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;cursor:pointer;height:8.4px;width:100%}input[type=range]::-moz-range-thumb{background:#fff;border:1px solid #000;border-radius:3px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;cursor:pointer;height:36px;width:16px}input[type=range]::-ms-track{background:transparent;border-color:transparent;border-width:16px 0;color:transparent;cursor:pointer;height:8.4px;width:100%}input[type=range]::-ms-fill-lower{background:var(--indigo-600)}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{border:.2px solid #010101;border-radius:2.6px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d}input[type=range]::-ms-fill-upper{background:var(--indigo-100)}input[type=range]::-ms-thumb{background:#fff;border:1px solid #000;border-radius:3px;box-shadow:1px 1px 1px #000,0 0 1px #0d0d0d;cursor:pointer;height:36px;width:16px}input[type=range]:focus::-ms-fill-lower{background:var(--indigo-500)}input[type=range]:focus::-ms-fill-upper{background:var(--indigo-100)}.font-stroke{-webkit-text-stroke:2px #000}.font-typewriter{font-family:American Typewriter}@font-face{font-display:swap;font-family:Rosario;font-style:normal;font-weight:700;src:url(data:font/woff2;base64,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) format("woff2"),url(/xari-dev/static/rosario-all-700-normal-043b1f5928b20008eccc323788b8c165.woff) format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01a0-01a1,U+01af-01b0,U+1ea0-1ef9,U+20ab}@font-face{font-display:swap;font-family:Rosario;font-style:normal;font-weight:700;src:url(data:font/woff2;base64,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) format("woff2"),url(/xari-dev/static/rosario-all-700-normal-043b1f5928b20008eccc323788b8c165.woff) format("woff");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-display:swap;font-family:Rosario;font-style:normal;font-weight:700;src:url(/xari-dev/static/rosario-latin-700-normal-9fe9feae302f413b3b5d16380dd256cc.woff2) format("woff2"),url(/xari-dev/static/rosario-all-700-normal-043b1f5928b20008eccc323788b8c165.woff) format("woff");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Crimson Text;font-style:normal;font-weight:400;src:url(/xari-dev/static/crimson-text-latin-400-normal-48fa7e7a63dde1204f5af0acbd9bb831.woff2) format("woff2"),url(/xari-dev/static/crimson-text-all-400-normal-2ed3c76bbe4b7f6c64d16ea76837332d.woff) format("woff");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#b3d4fc;text-shadow:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

/*
! tailwindcss v3.0.23 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}h1,h2,h3,h4,h5{font-family:Rosario}h2,h3,h4,h5{margin-top:2.5rem}body{color:rgba(0,0,0,.73);font-family:Crimson Text,ui-serif;font-size:1.5rem;line-height:2rem}a{color:#ff5700}blockquote,p{margin-bottom:1.5rem;margin-top:1.5rem}blockquote{border-left:4px;border-color:#ff5700;border-style:solid;color:rgba(0,0,0,.59);font-size:1.5rem;font-style:italic;line-height:2rem;padding-left:1.25rem}small{font-weight:200;margin-bottom:.5rem;margin-top:.5rem}*,:after,:before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.m-1{margin:.25rem}.my-3{margin-bottom:.75rem;margin-top:.75rem}.my-5{margin-bottom:1.25rem;margin-top:1.25rem}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.my-8{margin-bottom:2rem;margin-top:2rem}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.mb-10{margin-bottom:2.5rem}.mt-0{margin-top:0}.mt-5{margin-top:1.25rem}.mb-8{margin-bottom:2rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.list-item{display:list-item}.hidden{display:none}.h-24{height:6rem}.h-20{height:5rem}.h-16{height:4rem}.h-full{height:100%}.h-6{height:1.5rem}.h-5{height:1.25rem}.w-full{width:100%}.w-24{width:6rem}.w-20{width:5rem}.w-16{width:4rem}.w-11{width:2.75rem}.w-5{width:1.25rem}.max-w-xl{max-width:36rem}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.translate-x-5{--tw-translate-x:1.25rem}.translate-x-0,.translate-x-5{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x:0px}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.resize{resize:both}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.content-center{align-content:center}.items-center{align-items:center}.justify-center{justify-content:center}.gap-1{gap:.25rem}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.75rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.75rem*var(--tw-space-x-reverse))}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-2{border-width:2px}.border-emerald-800{--tw-border-opacity:1;border-color:rgb(6 95 70/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.bg-neutral-50{--tw-bg-opacity:1;background-color:rgb(250 250 250/var(--tw-bg-opacity))}.bg-indigo-600{--tw-bg-opacity:1;background-color:rgb(79 70 229/var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-5{padding:1.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-0{padding-bottom:0;padding-top:0}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.text-center{text-align:center}.text-5xl{font-size:3rem;line-height:1}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-8xl{font-size:6rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.font-semibold{font-weight:600}.font-light{font-weight:300}.font-medium{font-weight:500}.leading-6{line-height:1.5rem}.text-emerald-800{--tw-text-opacity:1;color:rgb(6 95 70/var(--tw-text-opacity))}.text-emerald-500{--tw-text-opacity:1;color:rgb(16 185 129/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.shadow,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.invert{--tw-invert:invert(100%)}.filter,.invert{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.content{margin-bottom:1.25rem;margin-top:1.25rem;padding-bottom:1.25rem}.content p{max-width:48rem}.painted-border{background:transparent;border-image-slice:6.8965517241% 7.8636959371% 7.0993914807% 0 fill;border-style:solid;border-width:30px 0;overflow:hidden}code[class*=language-],pre[class*=language-]{font-size:1.125rem;line-height:1.75rem}pre[class*=language-]{margin-left:-1.25rem;margin-right:-1.25rem;max-width:51rem;padding-left:1.25rem;padding-right:0}pre[class*=language-] span{font-size:1rem;line-height:1.5rem}.sm-text pre[class*=language-] span{font-size:.875rem;line-height:1.25rem}h1 a{color:rgba(0,0,0,.73)}.call-out-indigo{background:transparent;border-image-slice:6.8965517241% 7.8636959371% 7.0993914807% 0 fill;border-image-source:url(/xari-dev/static/bg-paper-indigo-802b37ee4d804d6242e32afa23b84b94.svg);border-style:solid;border-width:30px 0;margin-left:-1.25rem;margin-right:-1.25rem;overflow:hidden;padding:.5rem 0 1rem 1.25rem}.call-out-indigo :not(pre)>code[class*=language-],.call-out-indigo pre[class*=language-]{background:none;border:none;max-width:none;width:calc(100% + 20px)}.call-out-indigo code[class*=language-]{padding-right:0}.hover\:bg-indigo-700:hover{--tw-bg-opacity:1;background-color:rgb(67 56 202/var(--tw-bg-opacity))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\:ring-indigo-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(99 102 241/var(--tw-ring-opacity))}.focus\:ring-offset-2:focus{--tw-ring-offset-width:2px}@media (min-width:640px){.sm\:h-28{height:7rem}.sm\:h-24{height:6rem}.sm\:h-20{height:5rem}.sm\:w-28{width:7rem}.sm\:w-24{width:6rem}.sm\:w-20{width:5rem}.sm\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(1rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(1rem*var(--tw-space-x-reverse))}.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}.sm\:text-4xl{font-size:2.25rem;line-height:2.5rem}.sm\:text-2xl{font-size:1.5rem;line-height:2rem}.sm\:text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width:768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:text-3xl{font-size:1.875rem;line-height:2.25rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}}@media (min-width:1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\:px-8{padding-left:2rem;padding-right:2rem}}</style><link rel="icon" href="/xari-dev/favicon-32x32.png?v=96165a355baf19d04458cd7fc8e1f5c3" type="image/png"/><link rel="manifest" href="/xari-dev/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/xari-dev/icons/icon-48x48.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="72x72" href="/xari-dev/icons/icon-72x72.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="96x96" href="/xari-dev/icons/icon-96x96.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="144x144" href="/xari-dev/icons/icon-144x144.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="192x192" href="/xari-dev/icons/icon-192x192.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="256x256" href="/xari-dev/icons/icon-256x256.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="384x384" href="/xari-dev/icons/icon-384x384.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><link rel="apple-touch-icon" sizes="512x512" href="/xari-dev/icons/icon-512x512.png?v=96165a355baf19d04458cd7fc8e1f5c3"/><title data-react-helmet="true">Scraping web data with R &amp; the Tidyverse | Ideas in Development</title><link as="script" rel="preload" href="/xari-dev/webpack-runtime-4d727c66955a014f899f.js"/><link as="script" rel="preload" href="/xari-dev/framework-b782686806907140249c.js"/><link as="script" rel="preload" href="/xari-dev/89ce22b1-8a434d16af35682e2e68.js"/><link as="script" rel="preload" href="/xari-dev/dc6a8720040df98778fe970bf6c000a41750d3ae-caa2bca955599c9b1b03.js"/><link as="script" rel="preload" href="/xari-dev/app-cd3f71a3d8c77415ad01.js"/><link as="script" rel="preload" href="/xari-dev/commons-020ed7793b3c09aeb0f6.js"/><link as="script" rel="preload" href="/xari-dev/cd7d5f864fc9e15ed8adef086269b0aeff617554-e7e717af7ac4907af484.js"/><link as="script" rel="preload" href="/xari-dev/component---src-templates-blog-post-js-0545cce77b0cf10a5b3a.js"/><link as="fetch" rel="preload" href="/xari-dev/page-data/twin_peaks/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/xari-dev/page-data/sq/d/1588037479.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/xari-dev/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/xari-dev/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="p-5"><header><h3 class="text-xl my-3"><a href="/xari-dev/">Ideas in Development</a></h3></header><main class="my-3"><article><header class="my-3"><h1 class="text-5xl">Scraping web data with R &amp; the Tidyverse</h1><p>April 16, 2019</p></header><span></span><section class="content"><p>Being an employee of the EPFL Extension School has it’s perks.</p><p>For the past month, I’ve been following one of our courses, <a href="https://exts.epfl.ch/courses-programs/50-things-you-need-to-know-about-data">“50 Things
You Need to Know About
Data”</a>,
an introductory course designed to teach the basics of the tools and
technologies needed to work with data in the digital age.</p><p>Specifically, the course teaches how to store, structure, clean,
visualize, and analyze data using the R programming language —and it
provides a broad survey of topics like machine learning, data privacy,
and other topics as well. Having finally made my way through the
technical portion of the course, I thought that writing a data article
about my favorite show, Twin Peaks, would be the perfect opportunity to
put <em>some</em> of what I learned in the course to the test.</p><p>Before we begin, I want to properly represent my technical background.
As a course developer for the Extension School, I create courses about
programming for web applications. My area of expertise is the JavaScript
programming language, and it’s been several years since I worked as a
business analyst using MS Excel spreadsheet software. A month ago I
wrote my first line of R code, and this course is the only instruction
that I pursued to learn R. But I do happen to share an office with the
creator of the course, Xavier, whose time and enthusiasm I owe to much
of my progress.</p><p>But despite my more advanced technical background, this course <em>is</em> for
beginners. If you’ve worked with basic spreadsheets before, you’ll find
the material <em>very</em> approachable. And sure; it helped to have Xavier
sitting at a desk across the room from me, but if you take the course
you’ll get to chat with him for a half-hour each week about any course
topic that you’d like to discuss.</p><p>This article won’t showcase <em>all</em> of what I learned in the course. The
course teaches how to work with data from many different sources,
including databases, <code class="language-text">.csv</code> files, MS Excel spreadsheets, Rest APIs, and
more. The course also takes-on a more corporate focus in its choice of
data. For example; AirBnB rentals for the entire state of Texas is one
of the data sources that you get to play-around with if you take the
course.</p><p>But I’m a web guy, so this article focuses on a particularly crafty data
source: web scraping.</p><hr/><p>You remember Twin Peaks, don’t you? The show about owls, cherry pie,
deep black coffee, and the murder-mystery of Laura Palmer?</p><p><img src="/xari-dev/9ef0c82905fd4fba11cd85fa7c69ca54/cooper.gif" alt="Damn fine coffee"/></p><p>This show is a favorite of mine, and I think that if you ever make the
time to watch it, you’ll enjoy it too.</p><p>But don’t take it from me. Take it from IMDB, the Internet Movie
Database, where the lowest rating for any episode of the original series
was 7.5 out-of 10.</p><p>If you spend-enough time around me, you’re bound to get bitten by the
Twin Peaks bug too, and this year I finally managed to convince my
colleague to watch the show too. As the creator of the course, he was
aware of my progress, and challenged me to put my skills to the test by
creating a couple of charts about the show. Here’s how the conversation
went:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/bfdff906917d68af648679f6865081e7/6c745/broad_city_post.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:34.523809523809526%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVQoz1WQzU7CUBCFeQsTVyoUChYI5c8UChRawNJ/WtoCRdOdiW9gXBu3PoZbNz6CCxMf6Zi5LQYXX87MubnnztzC2Esg2Qnqqo+a4qIytsHnlEcWONnMoJq8E8gj5RUXvOKwvtDUfLStPbrre7SsPVp2AtFJILoHCHoE/jZEVY9Qmbooj/4HVvLQM3GG847GvEJxaIBfBLjWI3CqB07zUFJ9lMY2o0xBRH75CPVF2URdC/D0+obH5xcUhyYKnGxBsHaQkgf0ohT9KIW0TSEuQ7T1GM15gIYWoHGizcWG1YK6huQc8PX9g/ePT1xIejZhdR5AXIRoL0OIywiK46G7itG39qhrPmpTD7WZx5R6CqUw8qr07xMH/MTJVm4ZOwjzgK1Rkk22xuXAAj10NTSYl5GdUxBNTeHUn34FC+w7MQabFLJ7hxsrQc/YoW/u0DW2fzUpQV5nFTO6uXdcXVB9pr+kL/r4vIFQ9QAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Broad City Post" title="Broad City Post" src="/xari-dev/static/bfdff906917d68af648679f6865081e7/30d16/broad_city_post.png" srcSet="/xari-dev/static/bfdff906917d68af648679f6865081e7/9d904/broad_city_post.png 168w,/xari-dev/static/bfdff906917d68af648679f6865081e7/d99f2/broad_city_post.png 336w,/xari-dev/static/bfdff906917d68af648679f6865081e7/30d16/broad_city_post.png 672w,/xari-dev/static/bfdff906917d68af648679f6865081e7/6c745/broad_city_post.png 893w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Twin Peaks, for those of you who don’t know, is an all-time classic that
originally aired from 1989 until 1991. Most critics see Twin Peaks as a
show that was ahead of it’s time; pioneering a genre that would later
bring viewers Breaking Bad, Stranger Things, another other modern
favorites.</p><p>In <a href="https://twitter.com/katiesegreti/status/1111729535266013184">the
tweet</a>,
<a href="http://data-chips.com/">Katie Segretti</a> shares two charts that she made
about one of her favorite shows; Broad City.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:598px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/a131d59d83c7abcc32173cb58a29f740/0c69d/broad_city.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:111.30952380952381%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD/klEQVQ4y42V244bRRCGzR0ILnkO3oRX4Rm4DUgghMRlJKKICx4AxIKSkIXdeH1ar+3x+bj2zHg8npme88HjD3XbWSUhQpT0q6pHrb+r+q+prhyPJXt7S5omJEmifJ4XeIFLnIVIOx6P70Velg+Qa2mVbrvBd19+QbV6zVW1znW1Rq3eZDQbIGLnRMhp85tWHMHNCnpuhMgP5IeSsiypOLZN7a/nuJ6HCCJczycvCs5MFEWhNkqf5zmHw0HFaZYRZTlekhJmOcXhoLKsOK5Lu9OjWr2h3W7TarXo9no0Wy3qjQadTpfbdpt+f0Cj2eL2to2m9Wk2Wwp3d1263R7T6fRUsrnd0r7rMByN6A+G9LQ+Wn/AfLFQ3yWRJBiPJ8xmM4V6vaEOHY7GNG4uqdVq6LpxInQdh+V8htbp0Go0GGkas/GYgaah9TSV0Wg05qZWo9fTGAyHjCcT6vUmk/GITeMR8X6oblkKXDHDhIYluJwbNPQ9fy5MXhkuNcNh5fjkaUIUxURhRJZlqhPkHYZhpHySCinRg1iVKMuYmRbT7Y7ldoemW2ibLTPDYud6lAepYEGQhAhP4Ps+QgiiKFKx7wdEcUKWpUqwShgErOYzVos5i9kUS9+wM3RMXWdrmLjCw9s66J0lhq6zWW9Yr9dYlqWw3Zo4joPneaqCimyRIAgIw1AhkAiCk/cD3MSHscPjpzU+m15iCo8kjPDlnjNeZ30mzPGDENfZ4TqWKiFQpfiqRCf2YeLy1ZMrPuj9yr2zJ/Z9PCEUicRbhGmccj+eY+oz9rsVi/WClWmzNEx8IfCyiGK445snV3zSv2DtOMR+oAj988FvETrWHq3dwzRXinR5v2S+1hlOpljGhrW5pOjqfPu0ykfab6zfyfBfhEmaYDt7bHuHaayJwpCNucXe71kvpkxXE9Kuwdc//s3HMkPXJfIDHE+cVFfKewjxWpQ8f+OkQMXyd5TrvW3jJgHHoc2jxy/5cHDB/d6iCAVlHOLnASKJESJH+CFZXpwIpeSnC/YeLlodIs6iTB2+/6nKp/3niO3nzNY/8HM/xH6xwu8O8YMbxHZOFgdUZLdHUXhGRBxFqn1khqolAp9IBOimTXdnIvZNZsaIl9MtdtvEm85x3Q6edU8ah6c+3LtCtY70ErLz/4/J/7eUKE9eriuZLNkP8MMIT/iIICSMInaWhW3bGOslpn6P1u9hGDqb1YTJbEGcHuQ04Fge1VB4PcUrSZqydz2VmRTD80Nc1+Xm1TWj4ZC72jXXl8+4+OMXbhsNqpcX/P7iip2bqizL8u1noXI4lA8TOi8OavJKS7OcrDj8d8nveWcqaryfx3dRHJAHoOLi4fuxPL0X78bvs38A2Gtv/fzI5p4AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Broad City Tweet" title="Broad City Tweet" src="/xari-dev/static/a131d59d83c7abcc32173cb58a29f740/0c69d/broad_city.png" srcSet="/xari-dev/static/a131d59d83c7abcc32173cb58a29f740/9d904/broad_city.png 168w,/xari-dev/static/a131d59d83c7abcc32173cb58a29f740/d99f2/broad_city.png 336w,/xari-dev/static/a131d59d83c7abcc32173cb58a29f740/0c69d/broad_city.png 598w" sizes="(max-width: 598px) 100vw, 598px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>A close-up of the first chart shows the popularity of each episode
plotted for all five seasons of Broad City. A similar chart about the
popularity of each episode of Twin Peaks would require the title of each
episode, and its IMDB rating too. So my challenge was simple: find the
same IMDB data about Twin Peaks, and use my knowledge of R create the
two visualizations.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/ea64c/broad_city_chart.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.42857142857143%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQ4y5VTy3KjMBDk/78qh72s95CKbVjM0wYJoRcSCO+1UxKGxa7kkMOUZpDo6VG3Is45jscj8jxHHMdI0xTn8xmn0ynkeZbh43hEURQoyxKHwwHDMMA5h3EcQ0zTFMLnkd+klKKua3RdB8YYCCGoqirUWmsIIdB1DMaYEEopSCk3IJ/7cz6P/Kbv5gu/zvP8VK/5nom1NsTKcF9H+8PPI3w90lP90igA+hH23aZ5hlYdtGoWltMK8tx0BXIvjRbA0cLdHUY7wkoLKRtoraBkg04IuMnBWAs1mE2M6TGqHPR2PZyLZeTJTtCtAE0aXOMEhCYQvAFtE8TlBSnhKG4tfv8tMI8G47TcrR1HMMGhjQHXKogXDcag+nNB/PaO0693ENKgZwQ9o2DdFYRSnPMqdI/TDGWewtkBsqfo2yqwY5wjyTL0HtDT9pa5NTeUVQUpOYRgoOQCzgnu8z9Y35SyYI1bXaMpU9RZgjLP0LIORdOgul4fDHsF1QrM9xlmGDAMJhhXKQ1jLGbn0EkdRr57wbRGlaUg7Q1uvgezF2UV/gkqc96DC7FJv6g5bvnqs6DkQ9HF1ItnSUvgX9v/l6L15vK9JTYrfOPDdfUu2X+LvgL5SbwSCW/Zj/Qdw5/GJ+PLHVQ1f0JNAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Broad City Episodes ranked by IMDB" title="Broad City Episodes ranked by IMDB" src="/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/30d16/broad_city_chart.png" srcSet="/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/9d904/broad_city_chart.png 168w,/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/d99f2/broad_city_chart.png 336w,/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/30d16/broad_city_chart.png 672w,/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/d6a46/broad_city_chart.png 1008w,/xari-dev/static/d1563c10d44494b60fac9e79ec7572f1/ea64c/broad_city_chart.png 1116w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Since IMDB doesn’t have a public API or database that we can query to
get the information that we need, we’ll have to scrape it using R.
Scraping is the process of extracting targeted data from HTML pages, so
that we can use that data in our work. This is one of several ways to
source data that is taught in the course, and we’ll use the scraped data
to plot visualizations like the one above.</p><p>We’ll begin with the <a href="https://twinpeaks.fandom.com/wiki/">Twin Peaks
Wiki</a>. Notice the blue and yellow
boxes in the image below, which indicate some of the elements to be
scraped. The Wiki doesn’t include the IMDB rating, but it does include
other information which will be necessary to create the charts.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/5ef17/twin_peaks_wiki.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:36.904761904761905%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHFkKCP/8QAFhABAQEAAAAAAAAAAAAAAAAAAREA/9oACAEBAAEFAqZCXf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAACEBEh/9oACAEBAAY/AtLWP//EABgQAQADAQAAAAAAAAAAAAAAAAEAEUEx/9oACAEBAAE/IS3tNCJVwGMWz//aAAwDAQACAAMAAAAQh/8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EALc/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAgEBPxBcqP/EABoQAQEBAAMBAAAAAAAAAAAAAAERACFxgZH/2gAIAQEAAT8QgxLyIvrcECkoL9mSqt73/9k=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Twin Peaks Wiki" title="Twin Peaks Wiki" src="/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/e9f84/twin_peaks_wiki.jpg" srcSet="/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/f697d/twin_peaks_wiki.jpg 168w,/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/ba49c/twin_peaks_wiki.jpg 336w,/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/e9f84/twin_peaks_wiki.jpg 672w,/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/8a8a2/twin_peaks_wiki.jpg 1008w,/xari-dev/static/3c7dcf2130ec3157997c68efdb90fec4/5ef17/twin_peaks_wiki.jpg 1152w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Using the Web Inspector tool in Firefox, we can view each of these
elements as HTML. This helps us to understand the order of these
elements inside the HTML document —information which will be used to
scrape more precisely and efficiently. Below you can see that the node
of the HTML document that contains the name of the director of episode
9, David Lynch, is contained within a list-item with the class
<code class="language-text">pi-data-value</code>.</p><p><img src="/xari-dev/600509cc2e054032b55107c07d381ced/twin_peaks_wiki_demo.gif" alt="Twin Peaks Wiki HTML Nodes"/></p><p>Using R to scrape the director for episode 9 is quick work. In fact; it
only takes a few lines of code. Remember that the director’s name is
contained within an <code class="language-text">li</code> tag that has the class <code class="language-text">pi-data-value</code>. The
script below uses this selector to determine which node of text to
scrape from the page. In this case, the director’s name is contained
within an <code class="language-text">li</code> with the class <code class="language-text">pi-data-value</code>, which itself is nested
inside of a <code class="language-text">div</code> with a <code class="language-text">data-source</code> attribute of
<code class="language-text">&#x27;Director&#x27;</code>.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">library<span class="token punctuation">(</span>tidyverse<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## ── Attaching packages ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──

## ✔ ggplot2 3.1.1       ✔ purrr   0.3.2
## ✔ tibble  2.1.1       ✔ dplyr   0.8.0.1
## ✔ tidyr   0.8.3       ✔ stringr 1.4.0
## ✔ readr   1.3.1       ✔ forcats 0.4.0

## ── Conflicts ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre></div><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">library<span class="token punctuation">(</span>rvest<span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## Loading required package: xml2

##
## Attaching package: &#x27;rvest&#x27;

## The following object is masked from &#x27;package:purrr&#x27;:
##
##     pluck

## The following object is masked from &#x27;package:readr&#x27;:
##
##     guess_encoding</code></pre></div><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">library<span class="token punctuation">(</span>xml2<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>rvest<span class="token punctuation">)</span>

read_html<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Episode_9&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_node<span class="token punctuation">(</span><span class="token string">&quot;[data-source=&#x27;Director&#x27;] .pi-data-value&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;David Lynch&quot;</code></pre></div><p>Notice that here, we’re not passing an argument to the <code class="language-text">read_html</code>
function. That’s because any function call that follows the <code class="language-text">%&gt;%</code>
operator receives the returned value of the previous function as it’s
first parameter.</p><p>The title of that episode can be scraped the same way, using a slightly
different selector that targets the title instead of the director.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">read_html<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Episode_9&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_node<span class="token punctuation">(</span><span class="token string">&quot;[data-source=&#x27;Series name&#x27;] + section .pi-data-value&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;or: Coma&quot;</code></pre></div><p>This episode was originally titled “Episode 9”, which is why the text
above has the word “or” in it. We don’t need to include that word in our
visualization though, so let’s take it out using one additional
function.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">read_html<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Episode_9&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_node<span class="token punctuation">(</span><span class="token string">&quot;[data-source=&#x27;Series name&#x27;] + section .pi-data-value&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  str_remove<span class="token punctuation">(</span><span class="token string">&quot;or: &quot;</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;Coma&quot;</code></pre></div><p>Easy, isn’t it? Damn easy, some might say.</p><p>Let’s take this opportunity to re-factor the code to use a function.
This function will receive an episode URL, and it will return the title
for that episode. We’ll test it out with episode number 16.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_title <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  read_html<span class="token punctuation">(</span>episode_url<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_node<span class="token punctuation">(</span><span class="token string">&quot;[data-source=&#x27;Series name&#x27;] + section .pi-data-value&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  str_remove<span class="token punctuation">(</span><span class="token string">&quot;or: &quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

get_title<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Episode_16&quot;</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;Arbitrary Law&quot;</code></pre></div><p>Functions help us to organize our code into re-useable modules. Let’s
create a similar function that we can use to generate an episode’s URL
from it’s sequence number. For example; if we wanted the URL for episode
22, we could pass it to this function as an argument, and the function
would return to us the full URL for episode 22.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_episode_url <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str_c<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Episode_&quot;</span><span class="token punctuation">,</span> episode_number<span class="token punctuation">,</span> .sep <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

get_episode_url<span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;https://twinpeaks.fandom.com/wiki/Episode_22&quot;</code></pre></div><p>When we call the function and pass a number to it as an argument, it
returns the full URL to us, as expected.</p><p>We use this function to map-through all 29 episodes that aired between
1989 and 1991 using the <code class="language-text">map</code> function. In case you’ve been using R for
a while, <code class="language-text">map</code> is similar to <code class="language-text">lapply</code>. This is what it looks like to
map-through a vector of the numbers 1 to 29. We provide both the vector
of numbers, and the <code class="language-text">get_episode_url</code> function to <code class="language-text">map</code> as arguments,
and it returns to us a list of all 29 URLs.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">episode_urls <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">,</span> get_episode_url<span class="token punctuation">)</span>

episode_urls <span class="token percent-operator operator">%&gt;%</span>
  unlist<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">##  [1] &quot;https://twinpeaks.fandom.com/wiki/Episode_1&quot;
##  [2] &quot;https://twinpeaks.fandom.com/wiki/Episode_2&quot;
##  [3] &quot;https://twinpeaks.fandom.com/wiki/Episode_3&quot;
##  [4] &quot;https://twinpeaks.fandom.com/wiki/Episode_4&quot;
##  [5] &quot;https://twinpeaks.fandom.com/wiki/Episode_5&quot;
##  [6] &quot;https://twinpeaks.fandom.com/wiki/Episode_6&quot;
##  [7] &quot;https://twinpeaks.fandom.com/wiki/Episode_7&quot;
##  [8] &quot;https://twinpeaks.fandom.com/wiki/Episode_8&quot;
##  [9] &quot;https://twinpeaks.fandom.com/wiki/Episode_9&quot;
## [10] &quot;https://twinpeaks.fandom.com/wiki/Episode_10&quot;
## [11] &quot;https://twinpeaks.fandom.com/wiki/Episode_11&quot;
## [12] &quot;https://twinpeaks.fandom.com/wiki/Episode_12&quot;
## [13] &quot;https://twinpeaks.fandom.com/wiki/Episode_13&quot;
## [14] &quot;https://twinpeaks.fandom.com/wiki/Episode_14&quot;
## [15] &quot;https://twinpeaks.fandom.com/wiki/Episode_15&quot;
## [16] &quot;https://twinpeaks.fandom.com/wiki/Episode_16&quot;
## [17] &quot;https://twinpeaks.fandom.com/wiki/Episode_17&quot;
## [18] &quot;https://twinpeaks.fandom.com/wiki/Episode_18&quot;
## [19] &quot;https://twinpeaks.fandom.com/wiki/Episode_19&quot;
## [20] &quot;https://twinpeaks.fandom.com/wiki/Episode_20&quot;
## [21] &quot;https://twinpeaks.fandom.com/wiki/Episode_21&quot;
## [22] &quot;https://twinpeaks.fandom.com/wiki/Episode_22&quot;
## [23] &quot;https://twinpeaks.fandom.com/wiki/Episode_23&quot;
## [24] &quot;https://twinpeaks.fandom.com/wiki/Episode_24&quot;
## [25] &quot;https://twinpeaks.fandom.com/wiki/Episode_25&quot;
## [26] &quot;https://twinpeaks.fandom.com/wiki/Episode_26&quot;
## [27] &quot;https://twinpeaks.fandom.com/wiki/Episode_27&quot;
## [28] &quot;https://twinpeaks.fandom.com/wiki/Episode_28&quot;
## [29] &quot;https://twinpeaks.fandom.com/wiki/Episode_29&quot;</code></pre></div><p>We can now even map-through the episode URLs, passing each URL to the
<code class="language-text">get_title</code> function. <code class="language-text">map_chr</code> works just like a regular <code class="language-text">map</code>, except
that it will <em>always</em> return a character.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">episode_titles <span class="token operator">&lt;-</span> episode_urls <span class="token percent-operator operator">%&gt;%</span>
  map_chr<span class="token punctuation">(</span>get_title<span class="token punctuation">)</span>

episode_titles</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">##  [1] &quot;Traces to Nowhere&quot;
##  [2] &quot;Zen, or the Skill to Catch a Killer&quot;
##  [3] &quot;Rest in Pain&quot;
##  [4] &quot;The One-Armed Man&quot;
##  [5] &quot;Cooper&#x27;s Dreams&quot;
##  [6] &quot;Realization Time&quot;
##  [7] &quot;The Last Evening&quot;
##  [8] &quot;May the Giant Be With You&quot;
##  [9] &quot;Coma&quot;
## [10] &quot;The Man Behind Glass&quot;
## [11] &quot;Laura&#x27;s Secret Diary&quot;
## [12] &quot;The Orchid&#x27;s Curse&quot;
## [13] &quot;Demons&quot;
## [14] &quot;Lonely Souls&quot;
## [15] &quot;Drive With a Dead Girl&quot;
## [16] &quot;Arbitrary Law&quot;
## [17] &quot;Dispute Between Brothers&quot;
## [18] &quot;Masked Ball&quot;
## [19] &quot;The Black Widow&quot;
## [20] &quot;Checkmate&quot;
## [21] &quot;Double Play&quot;
## [22] &quot;Slaves and Masters&quot;
## [23] &quot;The Condemned Woman&quot;
## [24] &quot;Wounds and Scars&quot;
## [25] &quot;On the Wings of Love&quot;
## [26] &quot;Variations on Relations&quot;
## [27] &quot;The Path to the Black Lodge&quot;
## [28] &quot;The Night of DecisionMiss Twin Peaks (see below)&quot;
## [29] &quot;Beyond Life and Death&quot;</code></pre></div><p>Something isn’t quite right about our list of episode titles. First of
all, any true fan will notice instantly that there are actually 30
episodes in the original series, not 29<!-- -->!<!-- --> It turns out that the Twin
Peaks Wiki uses a different URL pattern for the pilot episode. The
script below scrapes the title from the pilot episode’s page. Notice
that the URL ends in <code class="language-text">/Pilot</code> instead of <code class="language-text">/Episode_0</code>, or <code class="language-text">/Episode_1</code>
as might be expected, given the pattern that is used for the subsequent
29 episodes.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_title<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Pilot&quot;</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [1] &quot;Northwest Passage&quot;</code></pre></div><p>This isn’t a problem though. We can simply prepend the episode titles
with the pilot’s title like this:</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">episode_titles <span class="token operator">&lt;-</span> episode_titles <span class="token percent-operator operator">%&gt;%</span>
  prepend<span class="token punctuation">(</span>get_title<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Pilot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

episode_titles</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">##  [1] &quot;Northwest Passage&quot;
##  [2] &quot;Traces to Nowhere&quot;
##  [3] &quot;Zen, or the Skill to Catch a Killer&quot;
##  [4] &quot;Rest in Pain&quot;
##  [5] &quot;The One-Armed Man&quot;
##  [6] &quot;Cooper&#x27;s Dreams&quot;
##  [7] &quot;Realization Time&quot;
##  [8] &quot;The Last Evening&quot;
##  [9] &quot;May the Giant Be With You&quot;
## [10] &quot;Coma&quot;
## [11] &quot;The Man Behind Glass&quot;
## [12] &quot;Laura&#x27;s Secret Diary&quot;
## [13] &quot;The Orchid&#x27;s Curse&quot;
## [14] &quot;Demons&quot;
## [15] &quot;Lonely Souls&quot;
## [16] &quot;Drive With a Dead Girl&quot;
## [17] &quot;Arbitrary Law&quot;
## [18] &quot;Dispute Between Brothers&quot;
## [19] &quot;Masked Ball&quot;
## [20] &quot;The Black Widow&quot;
## [21] &quot;Checkmate&quot;
## [22] &quot;Double Play&quot;
## [23] &quot;Slaves and Masters&quot;
## [24] &quot;The Condemned Woman&quot;
## [25] &quot;Wounds and Scars&quot;
## [26] &quot;On the Wings of Love&quot;
## [27] &quot;Variations on Relations&quot;
## [28] &quot;The Path to the Black Lodge&quot;
## [29] &quot;The Night of DecisionMiss Twin Peaks (see below)&quot;
## [30] &quot;Beyond Life and Death&quot;</code></pre></div><p>We now have the titles for all 30 episodes, including the pilot. It’s
time to get the IMDB ratings for each episode. These are found on the
<a href="https://www.imdb.com/title/tt0098936/episodes?season=1&amp;ref_=ttep_ep_sn_nx">IMDB pages about Twin
Peaks</a>,
which you can see a preview of below. Notice also the green box in the
top-left corner. IMDB splits the episode information into two pages, so
once again we’ll have to account for multiple URLs in our script.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/5ef17/imdb.jpg" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:69.64285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUCA//EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABp9Z1Q0aR/8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDAAQREv/aAAgBAQABBQKNCc9Qmm/teIeyUVsqhR//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/AVLo5cP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAcEAADAAEFAAAAAAAAAAAAAAAAARECEiExYtH/2gAIAQEABj8CmmTtRVclM/DdUiUP/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERITFBUf/aAAgBAQABPyFC2VOMDZDCJVNgtJTvir6QJRykMkP/2gAMAwEAAgADAAAAEKDv/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERIUH/2gAIAQMBAT8Qmk4Wbg//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EHZgrNP/xAAbEAEBAAMBAQEAAAAAAAAAAAABEQAhMVFBcf/aAAgBAQABPxCWtBFHfPzDaCoCfMXKAoW8w/TAO1btp3grcqhy4gUVYe5//9k=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Twin Peaks ratings on IMDB" title="Twin Peaks ratings on IMDB" src="/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/e9f84/imdb.jpg" srcSet="/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/f697d/imdb.jpg 168w,/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/ba49c/imdb.jpg 336w,/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/e9f84/imdb.jpg 672w,/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/8a8a2/imdb.jpg 1008w,/xari-dev/static/00db134dfa47f0e3153a19945406cf7a/5ef17/imdb.jpg 1152w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>The URLs for IMDB aren’t as pretty as the Twin Peaks Wiki ones. Below we
create another function, <code class="language-text">get_season_url</code> that returns the IMDB url for
each season when mapped to the numbers 1 and 2. Pay attention to the
part of the URL that reads <code class="language-text">season=1</code> or <code class="language-text">season=2</code>.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_season_url <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>season_number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str_c<span class="token punctuation">(</span><span class="token string">&quot;https://www.imdb.com/title/tt0098936/episodes?season=&quot;</span><span class="token punctuation">,</span> season_number<span class="token punctuation">,</span> <span class="token string">&quot;&amp;ref_=ttep_ep_sn_nx&quot;</span><span class="token punctuation">,</span> .sep <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

season_urls <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> get_season_url<span class="token punctuation">)</span>

season_urls</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
## [1] &quot;https://www.imdb.com/title/tt0098936/episodes?season=1&amp;ref_=ttep_ep_sn_nx&quot;
##
## [[2]]
## [1] &quot;https://www.imdb.com/title/tt0098936/episodes?season=2&amp;ref_=ttep_ep_sn_nx&quot;</code></pre></div><p>The ratings are contained inside of a <code class="language-text">span</code> tag with the class
<code class="language-text">&#x27;ipl-rating-star__rating&#x27;</code>. We can get the IMDB ratings using the same
code that we used to get the titles for all episodes from the Twin Peaks
Wiki. This will return to us a list of the episode ratings for each
season. The <code class="language-text">as.numeric</code> function at the end of the script simply
ensures that we’re returning the ratings in a number format, rather than
as text.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_episode_ratings <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>season_url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  read_html<span class="token punctuation">(</span>season_url<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_nodes<span class="token punctuation">(</span><span class="token string">&quot;.ipl-rating-star.small .ipl-rating-star__rating&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  as.numeric<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

ratings <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span>season_urls<span class="token punctuation">,</span> get_episode_ratings<span class="token punctuation">)</span>

ratings</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
## [1] 8.9 8.4 9.0 8.4 8.3 8.6 8.6 9.1
##
## [[2]]
##  [1] 9.0 8.7 8.3 8.2 8.5 8.6 9.4 8.6 9.3 7.9 7.6 7.6 7.9 7.8 7.5 7.9 7.7
## [18] 8.1 8.1 8.3 8.6 9.3</code></pre></div><p>The numbers above are the IMDB ratings for each episode of the original
two seasons of Twin Peaks. We’re almost ready to create our table of
episodes and their ratings, but first let’s modify the <code class="language-text">ratings</code> list so
that it tells us slightly more information about the data.</p><p><code class="language-text">ratings</code> is a list of two items —each of which is a list itself. The
first item is a list of all ratings for season 1, and the second item is
a list for all ratings for season 2. Using a function called
<code class="language-text">set_names</code>, we can give each item with a descriptive name.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ratings <span class="token operator">&lt;-</span> ratings <span class="token percent-operator operator">%&gt;%</span>
  set_names<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;Season 1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Season 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

ratings</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## $`Season 1`
## [1] 8.9 8.4 9.0 8.4 8.3 8.6 8.6 9.1
##
## $`Season 2`
##  [1] 9.0 8.7 8.3 8.2 8.5 8.6 9.4 8.6 9.3 7.9 7.6 7.6 7.9 7.8 7.5 7.9 7.7
## [18] 8.1 8.1 8.3 8.6 9.3</code></pre></div><p>This is already far more helpful. But let’s go one step further, and
convert the <code class="language-text">ratings</code> list of two items (<code class="language-text">&#x27;Season 1&#x27;</code> and <code class="language-text">&#x27;Season 2&#x27;</code>)
into a “tibble”, the dataframe of choice in the Tidyverse.</p><p>Using the <code class="language-text">enframe</code> function, <code class="language-text">ratings</code> gets converted to a tibble with
two columns: <code class="language-text">season</code> and <code class="language-text">ratings</code>.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ratings <span class="token operator">&lt;-</span> ratings <span class="token percent-operator operator">%&gt;%</span>
  enframe<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;season&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;ratings&quot;</span><span class="token punctuation">)</span>

ratings</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 2 x 2
##   season   ratings
##   &lt;chr&gt;    &lt;list&gt;
## 1 Season 1 &lt;dbl [8]&gt;
## 2 Season 2 &lt;dbl [22]&gt;</code></pre></div><p>The data-frame above contains a column for <code class="language-text">season</code>, and one for
<code class="language-text">ratings</code>. There are only two rows, but each rating is a vector of
multiple ratings; the first containing 8, and the second 22. Together
these represent all 30 episodes, and we can view the whole set easily
via the <code class="language-text">unnest</code> function, which will expand or “un-nest” the vectors
for us.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">ratings <span class="token operator">&lt;-</span> ratings <span class="token percent-operator operator">%&gt;%</span>
  unnest<span class="token punctuation">(</span><span class="token punctuation">)</span>

ratings</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 30 x 2
##    season   ratings
##    &lt;chr&gt;      &lt;dbl&gt;
##  1 Season 1     8.9
##  2 Season 1     8.4
##  3 Season 1     9
##  4 Season 1     8.4
##  5 Season 1     8.3
##  6 Season 1     8.6
##  7 Season 1     8.6
##  8 Season 1     9.1
##  9 Season 2     9
## 10 Season 2     8.7
## # … with 20 more rows</code></pre></div><p>Finally, we can combine these two sets of values —the titles and the
ratings —into their own table that we can then use to make our
visualization.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">twin_peaks_episodes <span class="token operator">&lt;-</span> tibble<span class="token punctuation">(</span>title <span class="token operator">=</span> episode_titles<span class="token punctuation">,</span>
                              season <span class="token operator">=</span> ratings<span class="token operator">$</span>season<span class="token punctuation">,</span>
                              rating <span class="token operator">=</span> ratings<span class="token operator">$</span>ratings<span class="token punctuation">)</span>

twin_peaks_episodes</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 30 x 3
##    title                               season   rating
##    &lt;chr&gt;                               &lt;chr&gt;     &lt;dbl&gt;
##  1 Northwest Passage                   Season 1    8.9
##  2 Traces to Nowhere                   Season 1    8.4
##  3 Zen, or the Skill to Catch a Killer Season 1    9
##  4 Rest in Pain                        Season 1    8.4
##  5 The One-Armed Man                   Season 1    8.3
##  6 Cooper&#x27;s Dreams                     Season 1    8.6
##  7 Realization Time                    Season 1    8.6
##  8 The Last Evening                    Season 1    9.1
##  9 May the Giant Be With You           Season 2    9
## 10 Coma                                Season 2    8.7
## # … with 20 more rows</code></pre></div><p>But there’s a problem with the table.</p><p>It comes back to the funny way that episodes of Twin Peaks didn’t
originally have titles. When the penultimate episode aired on June 10th,
1991, it was titled “Episode 29”. Later, the creators of the show, David
Lynch and Mark Frost called it “The Night of Decision”, but the fans
began referring to the episode as “Miss Twin Peaks” —the name of the
beauty pageant that the episode surrounds. Our scraping script picked-up
both of these titles, and even reference to a footnote about the story
of two names.</p><p>We can view episode 29 in isolation using the <code class="language-text">slice</code> function, which
will return us the row number that we pass to it —29, in this case.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  slice<span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 1 x 3
##   title                                            season   rating
##   &lt;chr&gt;                                            &lt;chr&gt;     &lt;dbl&gt;
## 1 The Night of DecisionMiss Twin Peaks (see below) Season 2    8.6</code></pre></div><p>Fixing this programmatically shouldn’t take much work. Let’s first
remove the reference to the footnote: <code class="language-text">&#x27;(see below)&#x27;</code>.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">twin_peaks_episodes <span class="token operator">&lt;-</span> twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  mutate<span class="token punctuation">(</span>
    title <span class="token operator">=</span> if_else<span class="token punctuation">(</span>
      str_detect<span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token string">&quot;The Night of Decision&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Miss Twin Peaks&quot;</span><span class="token punctuation">,</span>
      title
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  slice<span class="token punctuation">(</span><span class="token number">29</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 1 x 3
##   title           season   rating
##   &lt;chr&gt;           &lt;chr&gt;     &lt;dbl&gt;
## 1 Miss Twin Peaks Season 2    8.6</code></pre></div><p>The table above is exactly what we need to make our first
visualization<!-- -->!<!-- --> The code below plots our ratings for each episode and
generates a clean-looking chart.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">library<span class="token punctuation">(</span>hrbrthemes<span class="token punctuation">)</span>

plot_episode_popularity <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_table<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ggplot<span class="token punctuation">(</span>episode_table<span class="token punctuation">,</span>
         aes<span class="token punctuation">(</span>x <span class="token operator">=</span> forcats<span class="token operator">::</span>fct_reorder<span class="token punctuation">(</span>title<span class="token punctuation">,</span> episode<span class="token punctuation">)</span><span class="token punctuation">,</span>
             y <span class="token operator">=</span> rating<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_point<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>color <span class="token operator">=</span> season<span class="token punctuation">)</span><span class="token punctuation">,</span>
             shape <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">,</span>
             size <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_text<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>label <span class="token operator">=</span> title<span class="token punctuation">)</span><span class="token punctuation">,</span>
            angle <span class="token operator">=</span> <span class="token number">270</span><span class="token punctuation">,</span>
            size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
            hjust <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            nudge_y <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  labs<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token string">&quot;Episodes&quot;</span><span class="token punctuation">,</span>
       y <span class="token operator">=</span> <span class="token string">&quot;IMDB Rating&quot;</span><span class="token punctuation">,</span>
       title <span class="token operator">=</span> <span class="token string">&quot;Twin Peaks episodes ranked by IMDB&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme_ipsum_rc<span class="token punctuation">(</span>grid<span class="token operator">=</span><span class="token string">&quot;Y&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme<span class="token punctuation">(</span>axis.text.x<span class="token operator">=</span>element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        panel.grid.major <span class="token operator">=</span> element_line<span class="token punctuation">(</span>linetype <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend.title <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  mutate<span class="token punctuation">(</span>episode <span class="token operator">=</span> row_number<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  plot_episode_popularity<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/63e138021017efff137c811713829d1b/4ad3a/unnamed-chunk-18-1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:41.66666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVQoz6WR23LDIAxE/f//WKdxJm1iWxgTAvh6OqK5uHnoQ7sziwSSVgIKABFhX1W875V7DocDu7LkdDyyxbquujz5GgOKECPJOZKRbEfvcSJUtscOAyYm2hAzFYsW32xcVyTnxIdosSwLzlrk9Enf1FyMIHVNbS27Vvgwht57TsbwZgylMVR9z9l7jtZSns+4y+UpqE4IAdN1OO+Jw4BOHa5XurZlmWfmaSKGQNM0OOe+bd/TiWBFGFNiSgkdrlBV5TiOzPP8eBP1leuts8aVihhj9odhIKaUc2pjcuMsuBW6N/ht/4rt2Q/Be/F/mAX17n8RVEz6vptf/gIuvXGoVYEmOAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="unnamed chunk 18 1" title="unnamed chunk 18 1" src="/xari-dev/static/63e138021017efff137c811713829d1b/30d16/unnamed-chunk-18-1.png" srcSet="/xari-dev/static/63e138021017efff137c811713829d1b/9d904/unnamed-chunk-18-1.png 168w,/xari-dev/static/63e138021017efff137c811713829d1b/d99f2/unnamed-chunk-18-1.png 336w,/xari-dev/static/63e138021017efff137c811713829d1b/30d16/unnamed-chunk-18-1.png 672w,/xari-dev/static/63e138021017efff137c811713829d1b/d6a46/unnamed-chunk-18-1.png 1008w,/xari-dev/static/63e138021017efff137c811713829d1b/4ad3a/unnamed-chunk-18-1.png 1152w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>Now that we’ve sucessfully reproduced the first chart from Katie’s
tweet, let’s have a look at the second chart, which visualizes the
centrality of different characters to the show’s plot, based on the
number of times they are mentioned in the episode summaries on IMDB.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/322d96b7925f778b13d29991aea42857/0d6fe/broad_city_chart_2.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:71.42857142857143%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQ4y62SvW4TQRSFt+IteAJEAa9AQcNLgEKB+OmgQQqINqKkpaJJTAGGhggUoUBigyKjYLK21+t47bWNZ39mZ2ZtFIX4Q2uwZUNMASmOzpVG55t7RmMJ0cd2qzQ6TapujXLFpuo4VKtVbNvGcer4vk/dqeN5HpVKZexJkqC1Rik19oms7ODr9j791w10o8+RUgyiGBEECCEIgmAcllLO+QT0B1AbTbhUZHh2nbX8LhdbBR77LofpAGUMxpi5wKwy2O+ydGoQV4twboPba5tYuzmuODuMzAB5TGCiRZdYkYwRS4Ux8H5uC2svz033E0cm/StwkawwCqfA5Qz45TnX66V/B85WngVOKy+otrDyiQNPvHIUx8cCR0YhVfwfb3h+g3tPM+Azbrif+W4gVqO5Pzeexy7ROvk5/wIlU6DRiMsFOPOGu6vvsMovuOasQ/wAEz1CK4nJgkYjlUSbAYk6ROkDVDabIUNjOEg1qdFYMpEEd3bg0jYPXxY55Wyy7OYgPs0wuMDKxya3Ci3svMtwpUbytsS34RPS6BVpr8aga1Pp9nnfCvFCiZWtGXYFPdcnjBPstkeoJJ22ixBd9lo9PtQ9wk6EX9pH9Xp02ltEQYWw6yH8Br0wptzsEEjFD+mP8SfKRRrjAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Broad City characters mentioned in episode
summaries" title="Broad City characters mentioned in episode
summaries" src="/xari-dev/static/322d96b7925f778b13d29991aea42857/30d16/broad_city_chart_2.png" srcSet="/xari-dev/static/322d96b7925f778b13d29991aea42857/9d904/broad_city_chart_2.png 168w,/xari-dev/static/322d96b7925f778b13d29991aea42857/d99f2/broad_city_chart_2.png 336w,/xari-dev/static/322d96b7925f778b13d29991aea42857/30d16/broad_city_chart_2.png 672w,/xari-dev/static/322d96b7925f778b13d29991aea42857/d6a46/broad_city_chart_2.png 1008w,/xari-dev/static/322d96b7925f778b13d29991aea42857/0d6fe/broad_city_chart_2.png 1115w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>In the case of Twin Peaks, we actually have the credits for each episode
easily available to us on the Twin Peaks Wiki. We’ll simply need to
scrape the cast data, and then filter-out any irrelevant information,
like credits for stunt-doubles, etc.</p><p>You can see where we’ll be scraping this data from in the GIF below.
Each cast member exists as a hyperlink (<code class="language-text">a</code>) inside-of an <code class="language-text">li</code> element.
This information will be used to select the names of the cast members
when we scrape the data.</p><p><img src="/xari-dev/1b28f8ad8ca66249036505a0a8e25e70/twin_peaks_wiki_cast.gif" alt="Twin Peaks Wiki - Cast Nodes"/></p><p>Below you’ll see a similar functions that we used to scrape the titles
from the Twin Peaks Wiki, only modified to select the episode cast and
characters information. We’ll also use the exact same <code class="language-text">episode_urls</code>
variable from above. The amount of nodes being scraped here quite large,
so I’m outputting the cast for episode 21 only to show the raw scraped
data.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">get_cast <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  read_html<span class="token punctuation">(</span>episode_url<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_nodes<span class="token punctuation">(</span><span class="token string">&quot;.WikiaArticle &gt; div &gt; ul &gt; li&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  html_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

cast <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;https://twinpeaks.fandom.com/wiki/Pilot&quot;</span><span class="token punctuation">,</span> episode_urls<span class="token punctuation">)</span><span class="token punctuation">,</span> get_cast<span class="token punctuation">)</span>

cast<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
##  [1] &quot;Kyle MacLachlan as Special Agent Dale Cooper\n&quot;
##  [2] &quot;Michael Ontkean as Sheriff Harry S. Truman\n&quot;
##  [3] &quot;Madchen Amick as Shelly Johnson\n&quot;
##  [4] &quot;Dana Ashbrook as Bobby Briggs\n&quot;
##  [5] &quot;Richard Beymer as Benjamin Horne\n&quot;
##  [6] &quot;Lara Flynn Boyle as Donna Hayward\n&quot;
##  [7] &quot;Sherilyn Fenn as Audrey Horne\n&quot;
##  [8] &quot;Warren Frost as Dr. Will Hayward\n&quot;
##  [9] &quot;Peggy Lipton as Norma Jennings\n&quot;
## [10] &quot;James Marshall as James Hurley\n&quot;
## [11] &quot;Everett McGill as Big Ed Hurley\n&quot;
## [12] &quot;Jack Nance as Pete Martell (credit only)\n&quot;
## [13] &quot;Kimmy Robertson as Lucy Moran\n&quot;
## [14] &quot;Joan Chen as Jocelyn Packard\n&quot;
## [15] &quot;Piper Laurie as Catherine Martell\n&quot;
## [16] &quot;Eric Da Re as Leo Johnson\n&quot;
## [17] &quot;Harry Goaz as Deputy Andy Brennan\n&quot;
## [18] &quot;Michael Horse as Deputy Tommy \&quot;Hawk\&quot; Hill\n&quot;
## [19] &quot; Chris Mulkey as Hank Jennings\n&quot;
## [20] &quot;Ian Buchanan as Dick Tremayne\n&quot;
## [21] &quot;James Booth as Ernie Niles\n&quot;
## [22] &quot;David Duchovny as DEA Agent Dennis / Denise Bryson\n&quot;
## [23] &quot;Gavan O&#x27;Herlihy as RCMP Officer Preston King\n&quot;
## [24] &quot;Wendy Robie as Nadine Hurley\n&quot;
## [25] &quot;Don Davis as Maj. Garland Briggs\n&quot;
## [26] &quot;Gary Hershberger as Mike Nelson\n&quot;
## [27] &quot;Annette McCarthy as Evelyn Marsh\n&quot;
## [28] &quot;Nicholas Love as Malcolm Sloan\n&quot;
## [29] &quot;Michael Parks as Jean Renault\n&quot;
## [30] &quot;J. Marvin Campbell as M. P. #1\n&quot;
## [31] &quot;Will Seltzer as Mr. Brunston\n&quot;
## [32] &quot;Craig MacLachlan as The Dead Man\n&quot;
## [33] &quot;John Epstein as Utility Stunts\n&quot;
## [34] &quot;Beverly Gordon as Mrs. Brunston [citation needed]&quot;
## [35] &quot;Don LaFontaine as Invitation to Love&#x27;s Announcer (voice) [citation needed]&quot;
## [36] &quot;Lance Davis as Chet Weems (voice)\n&quot;
## [37] &quot;Erika Anderson as Emerald (voice)\n&quot;
## [38] &quot;Timeline: Saturday, March 18\n&quot;
## [39] &quot; When Audrey is crounching by Ben, playing with his figurines, a blue microphone appears at the top of the screen.\n&quot;</code></pre></div><p>The <code class="language-text">credits</code> variable contains all of the scraped credits data from all
30 episode pages (including the pilot). But it contains a lot of
irrelevant data too. Have a look at the credits data for episode 21
above, we can see that it includes credits for voice actors,
non-appearing cast members (<code class="language-text">&#x27;credit only&#x27;</code>), and even some notes about
the episode as well.</p><p>We can remove some of the white-space and formatting from the credits
using a few simple functions. Notice that the list below is just
slightly cleaner than the one above. This is because we removed all of
the <code class="language-text">\n</code> patterns from the strings.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">clean_cast <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_cast<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str_squish<span class="token punctuation">(</span>episode_cast<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  str_trim<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  str_remove_all<span class="token punctuation">(</span><span class="token string">&quot;\\[([^\\]])\\]&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> <span class="token comment"># remove citations</span>
  str_replace_all<span class="token punctuation">(</span><span class="token string">&quot;&#x27;&quot;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&quot;&#x27;</span><span class="token punctuation">)</span> <span class="token comment"># convert single-quotes to double</span>
<span class="token punctuation">}</span>

cast <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span>cast<span class="token punctuation">,</span> clean_cast<span class="token punctuation">)</span>

cast<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
##  [1] &quot;Kyle MacLachlan as Special Agent Dale Cooper&quot;
##  [2] &quot;Michael Ontkean as Sheriff Harry S. Truman&quot;
##  [3] &quot;Madchen Amick as Shelly Johnson&quot;
##  [4] &quot;Dana Ashbrook as Bobby Briggs&quot;
##  [5] &quot;Richard Beymer as Benjamin Horne&quot;
##  [6] &quot;Lara Flynn Boyle as Donna Hayward&quot;
##  [7] &quot;Sherilyn Fenn as Audrey Horne&quot;
##  [8] &quot;Warren Frost as Dr. Will Hayward&quot;
##  [9] &quot;Peggy Lipton as Norma Jennings&quot;
## [10] &quot;James Marshall as James Hurley&quot;
## [11] &quot;Everett McGill as Big Ed Hurley&quot;
## [12] &quot;Jack Nance as Pete Martell (credit only)&quot;
## [13] &quot;Kimmy Robertson as Lucy Moran&quot;
## [14] &quot;Joan Chen as Jocelyn Packard&quot;
## [15] &quot;Piper Laurie as Catherine Martell&quot;
## [16] &quot;Eric Da Re as Leo Johnson&quot;
## [17] &quot;Harry Goaz as Deputy Andy Brennan&quot;
## [18] &quot;Michael Horse as Deputy Tommy \&quot;Hawk\&quot; Hill&quot;
## [19] &quot;Chris Mulkey as Hank Jennings&quot;
## [20] &quot;Ian Buchanan as Dick Tremayne&quot;
## [21] &quot;James Booth as Ernie Niles&quot;
## [22] &quot;David Duchovny as DEA Agent Dennis / Denise Bryson&quot;
## [23] &quot;Gavan O\&quot;Herlihy as RCMP Officer Preston King&quot;
## [24] &quot;Wendy Robie as Nadine Hurley&quot;
## [25] &quot;Don Davis as Maj. Garland Briggs&quot;
## [26] &quot;Gary Hershberger as Mike Nelson&quot;
## [27] &quot;Annette McCarthy as Evelyn Marsh&quot;
## [28] &quot;Nicholas Love as Malcolm Sloan&quot;
## [29] &quot;Michael Parks as Jean Renault&quot;
## [30] &quot;J. Marvin Campbell as M. P. #1&quot;
## [31] &quot;Will Seltzer as Mr. Brunston&quot;
## [32] &quot;Craig MacLachlan as The Dead Man&quot;
## [33] &quot;John Epstein as Utility Stunts&quot;
## [34] &quot;Beverly Gordon as Mrs. Brunston [citation needed]&quot;
## [35] &quot;Don LaFontaine as Invitation to Love\&quot;s Announcer (voice) [citation needed]&quot;
## [36] &quot;Lance Davis as Chet Weems (voice)&quot;
## [37] &quot;Erika Anderson as Emerald (voice)&quot;
## [38] &quot;Timeline: Saturday, March 18&quot;
## [39] &quot;When Audrey is crounching by Ben, playing with his figurines, a blue microphone appears at the top of the screen.&quot;</code></pre></div><p>Removing the voice-only credits, and other records that we aren’t
interested in is also quite simple. The function below will keep the
records that we want, and remove any of the ones that we don’t. Each
episode’s cast list gets mapped-to the <code class="language-text">filter_credits</code> function, and
the output is a much tidyer list of actual cast members who appeared in
the episode.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">filter_credits <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>episode_credits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  keep<span class="token punctuation">(</span>episode_credits<span class="token punctuation">,</span> str_detect<span class="token punctuation">(</span>episode_credits<span class="token punctuation">,</span> <span class="token string">&quot; as &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    discard<span class="token punctuation">(</span>str_length<span class="token punctuation">(</span>.<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> <span class="token comment"># remove any actual text that was scraped</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;credit only&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> <span class="token comment"># remove non-appearing cast members</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;performer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> <span class="token comment"># remove unknown actors</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;voice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> <span class="token comment"># remove voice-only cast members</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;deleted scene&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;archive footage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;citation needed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    discard<span class="token punctuation">(</span>str_detect<span class="token punctuation">(</span>.<span class="token punctuation">,</span> <span class="token string">&quot;Invitation To Love&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># remove soap opera credits</span>
<span class="token punctuation">}</span>

cast <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span>cast<span class="token punctuation">,</span> clean_cast<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  map<span class="token punctuation">(</span>filter_credits<span class="token punctuation">)</span>

cast<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
##  [1] &quot;Kyle MacLachlan as Special Agent Dale Cooper&quot;
##  [2] &quot;Michael Ontkean as Sheriff Harry S. Truman&quot;
##  [3] &quot;Madchen Amick as Shelly Johnson&quot;
##  [4] &quot;Dana Ashbrook as Bobby Briggs&quot;
##  [5] &quot;Richard Beymer as Benjamin Horne&quot;
##  [6] &quot;Lara Flynn Boyle as Donna Hayward&quot;
##  [7] &quot;Sherilyn Fenn as Audrey Horne&quot;
##  [8] &quot;Warren Frost as Dr. Will Hayward&quot;
##  [9] &quot;Peggy Lipton as Norma Jennings&quot;
## [10] &quot;James Marshall as James Hurley&quot;
## [11] &quot;Everett McGill as Big Ed Hurley&quot;
## [12] &quot;Kimmy Robertson as Lucy Moran&quot;
## [13] &quot;Joan Chen as Jocelyn Packard&quot;
## [14] &quot;Piper Laurie as Catherine Martell&quot;
## [15] &quot;Eric Da Re as Leo Johnson&quot;
## [16] &quot;Harry Goaz as Deputy Andy Brennan&quot;
## [17] &quot;Michael Horse as Deputy Tommy \&quot;Hawk\&quot; Hill&quot;
## [18] &quot;Chris Mulkey as Hank Jennings&quot;
## [19] &quot;Ian Buchanan as Dick Tremayne&quot;
## [20] &quot;James Booth as Ernie Niles&quot;
## [21] &quot;David Duchovny as DEA Agent Dennis / Denise Bryson&quot;
## [22] &quot;Gavan O\&quot;Herlihy as RCMP Officer Preston King&quot;
## [23] &quot;Wendy Robie as Nadine Hurley&quot;
## [24] &quot;Don Davis as Maj. Garland Briggs&quot;
## [25] &quot;Gary Hershberger as Mike Nelson&quot;
## [26] &quot;Annette McCarthy as Evelyn Marsh&quot;
## [27] &quot;Nicholas Love as Malcolm Sloan&quot;
## [28] &quot;Michael Parks as Jean Renault&quot;
## [29] &quot;J. Marvin Campbell as M. P. #1&quot;
## [30] &quot;Will Seltzer as Mr. Brunston&quot;
## [31] &quot;Craig MacLachlan as The Dead Man&quot;
## [32] &quot;John Epstein as Utility Stunts&quot;</code></pre></div><p>Much nicer. Now we have a tidy list of the cast members for each
episode. But still; what we really need are just the <em>characters</em> that
appear in each episode. Thankfully, this is quick-work too. When mapped
to a string, the <code class="language-text">str_extract</code> function will remove whatever pattern we
pass to it.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">characters <span class="token operator">&lt;-</span> map<span class="token punctuation">(</span>cast<span class="token punctuation">,</span> stringr<span class="token operator">::</span>str_extract<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">&quot;(?&lt;= as ).*&quot;</span><span class="token punctuation">)</span>

characters<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## [[1]]
##  [1] &quot;Special Agent Dale Cooper&quot;        &quot;Sheriff Harry S. Truman&quot;
##  [3] &quot;Shelly Johnson&quot;                   &quot;Bobby Briggs&quot;
##  [5] &quot;Benjamin Horne&quot;                   &quot;Donna Hayward&quot;
##  [7] &quot;Audrey Horne&quot;                     &quot;Dr. Will Hayward&quot;
##  [9] &quot;Norma Jennings&quot;                   &quot;James Hurley&quot;
## [11] &quot;Big Ed Hurley&quot;                    &quot;Lucy Moran&quot;
## [13] &quot;Jocelyn Packard&quot;                  &quot;Catherine Martell&quot;
## [15] &quot;Leo Johnson&quot;                      &quot;Deputy Andy Brennan&quot;
## [17] &quot;Deputy Tommy \&quot;Hawk\&quot; Hill&quot;       &quot;Hank Jennings&quot;
## [19] &quot;Dick Tremayne&quot;                    &quot;Ernie Niles&quot;
## [21] &quot;DEA Agent Dennis / Denise Bryson&quot; &quot;RCMP Officer Preston King&quot;
## [23] &quot;Nadine Hurley&quot;                    &quot;Maj. Garland Briggs&quot;
## [25] &quot;Mike Nelson&quot;                      &quot;Evelyn Marsh&quot;
## [27] &quot;Malcolm Sloan&quot;                    &quot;Jean Renault&quot;
## [29] &quot;M. P. #1&quot;                         &quot;Mr. Brunston&quot;
## [31] &quot;The Dead Man&quot;                     &quot;Utility Stunts&quot;</code></pre></div><p>The list above is exactly what we need<!-- -->!<!-- --> Now that we’ve isolated the
characters for all 30 episodes of Twin Peaks, we can add them to our
table of episode data as a new column named <code class="language-text">characters</code>. The <code class="language-text">mutate</code>
function will create a new column from the data that we pass to it —the
<code class="language-text">characters</code> list, in this case.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">twin_peaks_episodes <span class="token operator">&lt;-</span> twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  mutate<span class="token punctuation">(</span>characters<span class="token punctuation">)</span>

twin_peaks_episodes</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 30 x 4
##    title                               season   rating characters
##    &lt;chr&gt;                               &lt;chr&gt;     &lt;dbl&gt; &lt;list&gt;
##  1 Northwest Passage                   Season 1    8.9 &lt;chr [54]&gt;
##  2 Traces to Nowhere                   Season 1    8.4 &lt;chr [33]&gt;
##  3 Zen, or the Skill to Catch a Killer Season 1    9   &lt;chr [37]&gt;
##  4 Rest in Pain                        Season 1    8.4 &lt;chr [38]&gt;
##  5 The One-Armed Man                   Season 1    8.3 &lt;chr [31]&gt;
##  6 Cooper&#x27;s Dreams                     Season 1    8.6 &lt;chr [32]&gt;
##  7 Realization Time                    Season 1    8.6 &lt;chr [38]&gt;
##  8 The Last Evening                    Season 1    9.1 &lt;chr [32]&gt;
##  9 May the Giant Be With You           Season 2    9   &lt;chr [40]&gt;
## 10 Coma                                Season 2    8.7 &lt;chr [30]&gt;
## # … with 20 more rows</code></pre></div><p>How simple was that<!-- -->!<!-- --> The new column contains rows that look like <code class="language-text">&lt;chr [33]&gt;</code>. This means that the row contains a list of 33 strings, or
“characters” as they’re called in R. No pun intended.</p><p>In order to find the total number of appearances for each character
throughout the show, we need to first “un-nest” the column of characters
in each episode. The output below will show you what I mean by
“un-nesting”. The <code class="language-text">unnest</code> function is going to expand our tibble from
just 30 rows to a whopping 955 rows<!-- -->!<!-- --> It does this by creating a row for
every single character appearance. In a way, this changes the nature of
our tibble from a tibble of Twin Peaks episodes, to a tibble of all
character appearances throughout seasons 1 and 2 of Twin Peaks.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">all_character_appearances <span class="token operator">&lt;-</span> twin_peaks_episodes <span class="token percent-operator operator">%&gt;%</span>
  unnest<span class="token punctuation">(</span><span class="token punctuation">)</span>

all_character_appearances</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 955 x 4
##    title             season   rating characters
##    &lt;chr&gt;             &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
##  1 Northwest Passage Season 1    8.9 Special Agent Dale Cooper
##  2 Northwest Passage Season 1    8.9 Sheriff Harry S. Truman
##  3 Northwest Passage Season 1    8.9 Shelly Johnson
##  4 Northwest Passage Season 1    8.9 Bobby Briggs
##  5 Northwest Passage Season 1    8.9 Benjamin Horne
##  6 Northwest Passage Season 1    8.9 Donna Hayward
##  7 Northwest Passage Season 1    8.9 Audrey Horne
##  8 Northwest Passage Season 1    8.9 Dr. Will Hayward
##  9 Northwest Passage Season 1    8.9 Norma Jennings
## 10 Northwest Passage Season 1    8.9 James Hurley
## # … with 945 more rows</code></pre></div><p>The tibble above contains all appearances for every character in the
show between seasons 1 and 2. By applying the <code class="language-text">filter</code> function to
filter for a particular character, we can quickly find all of episodes
that a character appears in.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">all_character_appearances <span class="token percent-operator operator">%&gt;%</span>
  filter<span class="token punctuation">(</span>characters <span class="token operator">==</span> <span class="token string">&quot;Betty Briggs&quot;</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 7 x 4
##   title                 season   rating characters
##   &lt;chr&gt;                 &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;
## 1 Northwest Passage     Season 1    8.9 Betty Briggs
## 2 Traces to Nowhere     Season 1    8.4 Betty Briggs
## 3 Rest in Pain          Season 1    8.4 Betty Briggs
## 4 Cooper&#x27;s Dreams       Season 1    8.6 Betty Briggs
## 5 Masked Ball           Season 2    7.6 Betty Briggs
## 6 The Black Widow       Season 2    7.6 Betty Briggs
## 7 Beyond Life and Death Season 2    9.3 Betty Briggs</code></pre></div><p>It’s time now to summarize the character appearances. We want a list
containing each character, as well as the total number of episodes that
they appeared in. Using the <code class="language-text">group_by</code> function, we can group-together
all of the episodes that each character appeared-in. For Betty Briggs,
this would mean that we’re grouping-together the 7 appearances that you
can see in the tibble above.</p><p><code class="language-text">group_by</code> is different from <code class="language-text">filter</code> though, because <code class="language-text">group_by</code> will
always return the entire data set that was passed to it. But it enables
us to use another very useful function: <code class="language-text">summarize</code>.</p><p>We’ll use <code class="language-text">summarize</code> to count the number of episodes that each
character appears in, and to return a tibble of all 189 characters and
the number of appearances for each.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">appearances_per_character <span class="token operator">&lt;-</span> all_character_appearances <span class="token percent-operator operator">%&gt;%</span>
  group_by<span class="token punctuation">(</span>characters<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  summarise<span class="token punctuation">(</span>total_appearances <span class="token operator">=</span> n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  arrange<span class="token punctuation">(</span>desc<span class="token punctuation">(</span>total_appearances<span class="token punctuation">)</span><span class="token punctuation">)</span>

appearances_per_character</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 189 x 2
##    characters                   total_appearances
##    &lt;chr&gt;                                    &lt;int&gt;
##  1 Benjamin Horne                              30
##  2 Donna Hayward                               30
##  3 Sheriff Harry S. Truman                     30
##  4 Special Agent Dale Cooper                   30
##  5 Audrey Horne                                28
##  6 &quot;Deputy Tommy \&quot;Hawk\&quot; Hill&quot;                28
##  7 Deputy Andy Brennan                         26
##  8 Dr. Will Hayward                            26
##  9 Shelly Johnson                              26
## 10 Bobby Briggs                                25
## # … with 179 more rows</code></pre></div><p>Let’s quickly try applying the same “Betty Briggs” filter to the
<code class="language-text">appearances_per_character</code> tibble. This time, it will return a single
row, but the value of the <code class="language-text">total_appearances</code> column will be 7; the
number of rows that was returned the last time that we filtered for
Betty Briggs.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">appearances_per_character <span class="token percent-operator operator">%&gt;%</span>
  filter<span class="token punctuation">(</span>characters <span class="token operator">==</span> <span class="token string">&quot;Betty Briggs&quot;</span><span class="token punctuation">)</span></code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 1 x 2
##   characters   total_appearances
##   &lt;chr&gt;                    &lt;int&gt;
## 1 Betty Briggs                 7</code></pre></div><p>It’s <em>almost</em> time to plot our chart.</p><p>But before we do that, let’s filter the list of characters down to a
smaller, more relevant list. It isn’t very interesting to know about
minor characters who only appeared in one or two episodes. In fact,
let’s filter-out the bottom third of all characters, keeping only
those who appear in more than 10 episodes. Using the <code class="language-text">filter</code> function,
we can refine the number of characters to plot from 189 to just 29. This
should make for a far more readable chart.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">frequently_appearing_characters <span class="token operator">&lt;-</span> appearances_per_character <span class="token percent-operator operator">%&gt;%</span>
  filter<span class="token punctuation">(</span>total_appearances <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>

frequently_appearing_characters</code></pre></div><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">## # A tibble: 29 x 2
##    characters                   total_appearances
##    &lt;chr&gt;                                    &lt;int&gt;
##  1 Benjamin Horne                              30
##  2 Donna Hayward                               30
##  3 Sheriff Harry S. Truman                     30
##  4 Special Agent Dale Cooper                   30
##  5 Audrey Horne                                28
##  6 &quot;Deputy Tommy \&quot;Hawk\&quot; Hill&quot;                28
##  7 Deputy Andy Brennan                         26
##  8 Dr. Will Hayward                            26
##  9 Shelly Johnson                              26
## 10 Bobby Briggs                                25
## # … with 19 more rows</code></pre></div><p>Finally; using many of the same functions that we used to produce the
IMDB rankings chart, we can plot a horizonal column chart of the
characters according to how many episodes they appear in.</p><div class="gatsby-highlight" data-language="r"><pre class="language-r"><code class="language-r">frequently_appearing_characters <span class="token percent-operator operator">%&gt;%</span>
  ggplot<span class="token punctuation">(</span>aes<span class="token punctuation">(</span>x <span class="token operator">=</span> fct_reorder<span class="token punctuation">(</span>characters<span class="token punctuation">,</span>
                             total_appearances<span class="token punctuation">)</span><span class="token punctuation">,</span>
             y <span class="token operator">=</span> total_appearances<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  geom_col<span class="token punctuation">(</span>mapping <span class="token operator">=</span> aes<span class="token punctuation">(</span>fill <span class="token operator">=</span> characters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  coord_flip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  labs<span class="token punctuation">(</span>y <span class="token operator">=</span> <span class="token string">&quot;Total appearances&quot;</span><span class="token punctuation">,</span>
       title <span class="token operator">=</span> <span class="token string">&quot;Twin Peaks characters by their appearances&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme_ipsum_rc<span class="token punctuation">(</span>grid<span class="token operator">=</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme<span class="token punctuation">(</span>legend.position<span class="token operator">=</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
        axis.title.y <span class="token operator">=</span> element_blank<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/4ad3a/unnamed-chunk-29-1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:58.333333333333336%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACP0lEQVQoz4WTzU8TQRjG+3d58qYQL1xMBC5qiDEIXEzggGBMNEZIRGhFkKiED6lQLBQNKBaS8mHQRAQxBBRLt9ud3S1Q2CCl7fZndru2RU18k99kZg5Pnud9Z1w4lclkkGMxZEWgqCqyoiA0nZgQSLLM4dER/6tsNosrkUgQ13V2D/bZX99GPHmL2j+D6H2H1hdE6Z222RsKYfjeY4wU4VvkcPQDRt8Mx99lW9RlGAbhH1so2i7xzRlCbadZ6DzHwsPSAp2lzHlKCLnPEHKfzTPvKWHac4p57yX2lK85QSuqFImgajtIm0uMei4T6KlhvLv6JI+rCThY54mea/jcV9kMDkMq5UQ2caXTaaJRiZjQEBvLvOm4TrD7BsGuxhyPGgt7h9nuJqbcjYSm7nBgqraYaWZyDq1FqBq6iLC0BVXPoG4Qagb+5vf9lV5oGICohiNm2gOxh2JdKEJBU3Q+R5ZoGKni5lgtzf6aEzS9rKNhuJZbY/W0BLuYDX/JO8s6E873MLy9TVxRmIvKlPknqHw1SflEgYrAay5O+ahf9LK4NQupOJhJzJySTV7Q6mFEktgRgjkpTNloP5WBF5SPe6kIeDnvH+TCpJ+VhEkSOAbS1rvFEXPc5SNbiyRJaKpgbT3M7dY+Wju8tLQPca99iAdtz/n26aMVDttSNtevYrHisnuox3WMvQPWdja4u9zF/dWnNq0rPXhW+/npPAvTEbNSZYtiWkNJJpOFoRR9nn9g2mT/iFfsLpVKYX0QS/gX+Ts+JRjNeUQAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="unnamed chunk 29 1" title="unnamed chunk 29 1" src="/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/30d16/unnamed-chunk-29-1.png" srcSet="/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/9d904/unnamed-chunk-29-1.png 168w,/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/d99f2/unnamed-chunk-29-1.png 336w,/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/30d16/unnamed-chunk-29-1.png 672w,/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/d6a46/unnamed-chunk-29-1.png 1008w,/xari-dev/static/bdee9a0a478b3c1d757f29a56d277317/4ad3a/unnamed-chunk-29-1.png 1152w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><hr/><p>In this post, we scraped HTML data from several web pages to compile
data about the cult classic TV series Twin Peaks, and then we created
two charts from our scraped data.</p><p>But before you get the wrong impression, and think that <a href="https://exts.epfl.ch/courses-programs/50-things-you-need-to-know-about-data">“50 Things You
Need to Know About
Data”</a>
is a course about web scraping —I need to be clear that this is just one
topic among many that you’ll study if you follow the course.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:672px">
      <a class="gatsby-resp-image-link" href="/xari-dev/static/55e926514b3e1985e652a7e922145e2d/29114/inputs-outputs.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:56.547619047619044%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHklEQVQoz42SSWtUURCF+8/6H1y5cOPSRQLuFdwoKskikSAEgknIgEbTIZ225ze/fvM8fnKrO3HrheJWPepUnXfPGXRdS1WkhIGL51qksU9dJNRlSlOlclfb+jGqIqbMY5LYJw49wTd1Qd/3DFRS5pEMypKAPA0p84QsDQmDNa5j4tgmrmMReC55GlHkMXkWybA4XFNkkSzp2oZB11b0bUmkwLZOU2XSaOgatqWTRB5ZEsqiJPJZuyah7wrrKHAJPFswXZPTNjUDz7XRllNMY8nlxalsXC3n6NpSltyNFxxfjjm5nnB2M+Puj4FlWVtWiUQcefy4voC+YzB+GHF4sE9b58Jm7Vpo2pLQd/j5+469o3NevfnIs+e7vHj9nqOzMaOJRhQ4DG9vGN3fCpn9vc/0fctgMZ9yfnoi7/Yoim0Z+Gub6WzOwfEVO28Pebnzkd13X7kartANk8CzmIzv0VczVosJXz592DAs8lTEUKqpYeo9VG0aOp5rstAcvv8yGM1dLoYGw7FOmSkRg6e3VX1qsDBsm0rsITaI/CebKJXzNGC6tPh2ucC0HOaaI7luuuIM37NZO6ZglbBtWyvblJsBSSCKqVw1qOjqjCAMuZ/ZRNFGhIf5ZvAjRnxbbgh1XcOg7zrauiRNAvFdU+XkWYyhLzGNFdpqhqkvsE0NU33T5ljGSnqSOCCOfMGoPxVjsz2qgF7u/wm2/f+wm/MXHs056phn3PsAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Other concepts covered in the course." title="Other concepts covered in the course." src="/xari-dev/static/55e926514b3e1985e652a7e922145e2d/30d16/inputs-outputs.png" srcSet="/xari-dev/static/55e926514b3e1985e652a7e922145e2d/9d904/inputs-outputs.png 168w,/xari-dev/static/55e926514b3e1985e652a7e922145e2d/d99f2/inputs-outputs.png 336w,/xari-dev/static/55e926514b3e1985e652a7e922145e2d/30d16/inputs-outputs.png 672w,/xari-dev/static/55e926514b3e1985e652a7e922145e2d/d6a46/inputs-outputs.png 1008w,/xari-dev/static/55e926514b3e1985e652a7e922145e2d/47218/inputs-outputs.png 1344w,/xari-dev/static/55e926514b3e1985e652a7e922145e2d/29114/inputs-outputs.png 1920w" sizes="(max-width: 672px) 100vw, 672px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>As a newcomer to data science and data visualization, I found this
course inspiring. And as a web developer, it was refreshingly fun. I’d
recommend it to anyone who is interested in working with data, but who
hasn’t yet wrangled data programmatically.</p><p>Special thanks to <a href="http://data-chips.com/">Katie Segretti</a>, whose charts
were the inspiration for this article, and who graciously agreed to let
me use her visualizations here as well.</p></section><footer><div class="group leading-6 flex items-center space-x-3 sm:space-x-4 mb-10"><div data-gatsby-image-wrapper="" style="position:relative;overflow:hidden;width:50px;height:50px" class="gatsby-image-wrapper rounded-full"><div aria-hidden="true" data-placeholder-image="" style="height:100%;left:0;position:absolute;top:0;width:100%"></div><picture><source type="image/webp" data-srcset="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/dbc4a/xari.webp 50w,/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/d8057/xari.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/6ac16/xari.jpg" data-srcset="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/6ac16/xari.jpg 50w,/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/e07e1/xari.jpg 100w" alt="Mostly programming"/></picture><noscript><picture><source type="image/webp" srcSet="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/dbc4a/xari.webp 50w,/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/d8057/xari.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0" sizes="50px" decoding="async" loading="lazy" src="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/6ac16/xari.jpg" srcSet="/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/6ac16/xari.jpg 50w,/xari-dev/static/34e297c0cc8a085f2731382507d8b4f4/e07e1/xari.jpg 100w" alt="Mostly programming"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><p><strong>Mostly programming</strong><br/><small>(._.)</small></p></div></footer></article><nav class="max-w-2xl"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li><a rel="next" href="/xari-dev/sre_for_non_dev_ops/">Applying SRE<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2023</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/twin_peaks/";window.___webpackCompilationHash="f123cd3bcfe3c0eaf063";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c8f55184fd83c8ab8ee2.js"],"app":["/app-cd3f71a3d8c77415ad01.js"],"component---src-pages-404-js":["/component---src-pages-404-js-1a166a1a011a1222e6a9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5eb50402b4b24cec5891.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-0545cce77b0cf10a5b3a.js"]};/*]]>*/</script><script src="/xari-dev/polyfill-c8f55184fd83c8ab8ee2.js" nomodule=""></script><script src="/xari-dev/component---src-templates-blog-post-js-0545cce77b0cf10a5b3a.js" async=""></script><script src="/xari-dev/cd7d5f864fc9e15ed8adef086269b0aeff617554-e7e717af7ac4907af484.js" async=""></script><script src="/xari-dev/commons-020ed7793b3c09aeb0f6.js" async=""></script><script src="/xari-dev/app-cd3f71a3d8c77415ad01.js" async=""></script><script src="/xari-dev/dc6a8720040df98778fe970bf6c000a41750d3ae-caa2bca955599c9b1b03.js" async=""></script><script src="/xari-dev/89ce22b1-8a434d16af35682e2e68.js" async=""></script><script src="/xari-dev/framework-b782686806907140249c.js" async=""></script><script src="/xari-dev/webpack-runtime-4d727c66955a014f899f.js" async=""></script></body></html>